# Daily Log - 2025-09-07

## Tasks Completed âœ…
- Time: 15 min
- Status: Completed
- Description: Fixed React unique key warning on Reports page (AntD Table) by introducing stable `id` for site rows and using it as `rowKey`.
- Key Activities: Code review of `.map()` usages; identified duplicate `rowKey`; implemented patch; verified mapped elements have keys.
- Impact: Eliminates React warning; improves rendering stability.
- Files Modified:
  - apps/web/src/pages/Reports.tsx

- Time: 30 min
- Status: Completed
- Description: Prevented face-merge bug by making mock/dummy face embeddings deterministic per image (worker + API) and raising merge threshold.
- Key Activities: Updated worker InsightFace fallback to seed from image hash and add DCT/histogram features; made API placeholder embedding deterministic; increased `customer_merge_threshold` to 0.92.
- Impact: Different persons no longer collapse to one customer; safer matching.
- Files Modified:
  - apps/worker/app/embedder.py
  - apps/api/app/services/face_processing_service.py
  - apps/api/app/services/face_service.py

## Tasks In Progress ðŸ”„
- None

## Notes & Insights ðŸ’¡
- Warning pointed to `Body`, which commonly indicates AntD Table row key issues.
- All chart `.map()` usages already provide keys. If warnings persist, consider switching `XAxis` in Visitor Trends to a unique `fullDate` with `tickFormatter` for display.

## Tomorrow's Priorities ðŸ“‹
- Monitor for any remaining key warnings in charts.
- Tackle next UI polish tasks or bugfixes as reported.
