- Tasks Completed âœ…
  - 14:10 - Updated worker dependency pins to resolve PyAV build failure with FFmpeg 6; impact: Docker build should pull compatible wheel instead of failing source build; files: apps/worker/requirements.txt
  - 14:22 - Fixed pip resolver conflict by aligning Pydantic pins in pyproject; impact: dependency resolution no longer contradictory; files: pyproject.toml
  - 14:31 - Aligned root aiortc/av pins to avoid source builds and ffmpeg 7 requirement; impact: installs should pull compatible wheels; files: pyproject.toml
  - 14:40 - Bumped root package version to invalidate cached metadata; impact: pip resolves updated dependency pins; files: pyproject.toml
  - 19:55 - Fixed web TypeScript errors across staff recognition, streaming, reports, visits, workers, and tenant context; impact: TS build should pass without unknown/shape mismatches; files: apps/web/src/components/FaceRecognitionTest.tsx, apps/web/src/components/StaffFaceGallery.tsx, apps/web/src/components/WebRTCCameraStream.tsx, apps/web/src/components/WorkerLogViewer.tsx, apps/web/src/contexts/TenantContext.tsx, apps/web/src/pages/ApiKeys.tsx, apps/web/src/pages/Cameras.tsx, apps/web/src/pages/Reports.tsx, apps/web/src/pages/Visits.tsx, apps/web/src/pages/Workers.tsx, apps/web/src/services/api.ts
  - 20:05 - Updated web unit tests to use proper globals and typed API client mocks; impact: Vitest typing errors resolved for staff gallery and tenant management tests; files: apps/web/src/components/__tests__/StaffFaceGallery.test.tsx, apps/web/src/components/__tests__/TenantManagement.test.tsx
- Tasks In Progress ðŸ”„
  - 20:05 - None
- Notes & Insights ðŸ’¡
  - PyAV build failed due to FFmpeg 6 API changes (channel_layout removed). Pinning av>=11 and aiortc>=1.7 aligns with FFmpeg 6.
  - Root project dependencies conflicted by pinning pydantic==2.12.3 and pydantic[email]==2.7.1 together.
  - aiortc 1.13 pulls av>=14 which expects FFmpeg 7 and fails if not present.
  - Reports demographics API returns visitor_type/age_groups keys; frontend now normalizes to visitorType/ageGroups for charts.
- Tomorrow's Priorities ðŸ“‹
  - Re-run worker image build to confirm wheels install cleanly on amd64/arm64.
  - If build still fails, consider pinning Debian ffmpeg libs to 5.x or adjusting base image.
  - Re-run web typecheck and vitest if needed once allowed.
