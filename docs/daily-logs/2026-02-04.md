- Tasks Completed âœ…
- 2026-02-04 00:00 | done | Fix worker image build by adding PyAV system deps (pkg-config + FFmpeg dev libs). Impact: unblocks PyAV wheel build in CI. Files: apps/worker/Dockerfile
- 2026-02-04 00:00 | done | Fix API image build by pinning Python 3.11 and adding Pillow runtime/build deps. Impact: avoids source builds for pydantic_core and ensures Pillow links to zlib/jpeg/png. Files: apps/api/Dockerfile
- Tasks In Progress ðŸ”„
- 2026-02-04 00:00 | idle | Awaiting further CI failure details or additional build fixes.
- Notes & Insights ðŸ’¡
- PyAV (aiortc) requires pkg-config and FFmpeg headers on slim images; add libav* dev packages.
- Pillow source builds on slim need zlib/jpeg/png/tiff/freetype/webp/openjpeg headers.
- Pydantic-core fails on Python 3.14 due to PyO3 max support; stick to Python 3.11 as per project constraints.
- Tomorrow's Priorities ðŸ“‹
- Verify CI build steps for worker on amd64/arm64 and adjust base deps if further missing libraries are reported.
- Tasks Completed âœ…
- 2026-02-04 00:00 | done | Fix React hook dependency warnings across staff, visits, reports, tenants, users, api keys, and worker log viewer. Impact: removes stale closure risks and aligns with exhaustive-deps. Files: apps/web/src/components/StaffDetailsModal.tsx, apps/web/src/components/VisitFaceRemovalModal.tsx, apps/web/src/components/WorkerLogViewer.tsx, apps/web/src/pages/Reports.tsx, apps/web/src/pages/Tenants.tsx, apps/web/src/pages/Users.tsx, apps/web/src/pages/ApiKeys.tsx
- 2026-02-04 00:00 | done | Fix StaffFaceGallery hook deps and action keys to satisfy lint. Impact: stable callbacks and correct keying in card actions. Files: apps/web/src/components/StaffFaceGallery.tsx
- 2026-02-04 00:00 | done | Split tenant context to avoid react-refresh warning and update consumers. Impact: only component exports in context module, hook isolated. Files: apps/web/src/contexts/TenantContext.tsx, apps/web/src/contexts/TenantContextInternal.ts, apps/web/src/contexts/useTenants.ts, apps/web/src/components/Layout.tsx, apps/web/src/pages/Tenants.tsx
- 2026-02-04 00:00 | done | Remove non-component exports from TableActionButtons to satisfy react-refresh. Impact: eliminates lint warning with no functional change. Files: apps/web/src/components/TableActionButtons.tsx
- Tasks In Progress ðŸ”„
- 2026-02-04 00:00 | idle | Awaiting further lint or hook warning follow-ups.
- Notes & Insights ðŸ’¡
- React Refresh lint rule flags non-component value exports in component files; splitting context/hook avoids warnings cleanly.
- Tomorrow's Priorities ðŸ“‹
- Re-run web lint when requested and confirm no hook warnings remain.
